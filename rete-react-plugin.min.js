/*!
* rete-react-plugin v2.0.2
* (c) 2023 Vitaliy Stoliarov
* Released under the MIT license.
* */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react"),require("rete"),require("react-dom"),require("rete-render-utils"),require("styled-components"),require("rete-area-plugin")):"function"==typeof define&&define.amd?define(["exports","react","rete","react-dom","rete-render-utils","styled-components","rete-area-plugin"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).ReteReactPlugin={},t.React,t.Rete,t.ReactDOM,t.ReteRenderUtils,t.styled,t.ReteAreaPlugin)}(this,(function(t,e,n,r,o,i,a){"use strict";function u(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}function c(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}})),e.default=t,Object.freeze(e)}var l=c(e),s=c(r),f=u(i);function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){b(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function h(){h=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var i=e&&e.prototype instanceof d?e:d,a=Object.create(i.prototype),u=new P(o||[]);return r(a,"_invoke",{value:E(t,n,u)}),a}function s(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function d(){}function p(){}function v(){}var y={};c(y,i,(function(){return this}));var m=Object.getPrototypeOf,b=m&&m(m(_([])));b&&b!==e&&n.call(b,i)&&(y=b);var g=v.prototype=d.prototype=Object.create(y);function w(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function o(r,i,a,u){var c=s(t[r],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==typeof f&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,u)}),(function(t){o("throw",t,a,u)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,u)}))}u(c.arg)}var i;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return i=i?i.then(r,r):r()}})}function E(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return S()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=O(a,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=s(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function O(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=s(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function _(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=v,r(g,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:p,configurable:!0}),p.displayName=c(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,c(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},w(x.prototype),c(x.prototype,a,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new x(l(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(g),c(g,u,"Generator"),c(g,i,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=_,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),j(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:_(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function y(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,R(r.key),r)}}function b(t,e,n){return(e=R(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g(){return g=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},g.apply(this,arguments)}function w(t){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},w(t)}function x(t,e){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},x(t,e)}function E(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function O(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function k(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=w(t);if(e){var o=w(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return O(t)}(this,n)}}function j(){return j="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=w(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},j.apply(this,arguments)}function P(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function _(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,u=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(u.push(r.value),u.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(t,e)||S(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(t,e){if(t){if("string"==typeof t)return L(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?L(t,e):void 0}}function L(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function C(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=S(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function R(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}function z(t){var n=t.children,r=t.rendered;return e.useEffect((function(){r()})),n}var N,D,I=e.createContext({start:null,end:null,path:null});function M(t){var n,o=t.children,i=_(e.useState(null),2),a=i[0],u=i[1],c=_(e.useState(null),2),s=c[0],f=c[1],d=_(e.useState(null),2),p=d[0],h=d[1],v="x"in t.start?t.start:a,y="x"in t.end?t.end:s,m=(n=e.useRef(!1),e.useEffect((function(){n.current=!0}),[]),{apply:function(t){if(n.current)try{r.flushSync(t)}catch(n){var e=n?n.message:null;if(e&&(e.includes("flushSync was called from inside a lifecycle method")||e.includes("React error #187")))return void t();throw n}else t()}});return e.useEffect((function(){var e="function"==typeof t.start&&t.start((function(t){return m.apply((function(){return u(t)}))})),n="function"==typeof t.end&&t.end((function(t){return m.apply((function(){return f(t)}))}));return function(){e&&e(),n&&n()}}),[]),e.useEffect((function(){v&&y&&t.path(v,y).then((function(t){return m.apply((function(){return h(t)}))}))}),[v,y]),l.createElement(I.Provider,{value:{start:v,end:y,path:p}},o)}function T(){return e.useContext(I)}var A=f.default.svg(N||(N=P(["\n    overflow: visible !important;\n    position: absolute;\n    pointer-events: none;\n    width: 9999px;\n    height: 9999px;\n"]))),W=f.default.path(D||(D=P(["\n    fill: none;\n    stroke-width: 5px;\n    stroke: steelblue;\n    pointer-events: auto;\n    ","\n"])),(function(t){return t.styles&&t.styles(t)}));function B(t){var e=T().path;return e?l.createElement(A,{"data-testid":"connection"},l.createElement(W,{styles:t.styles,d:e})):null}var F="__reactContainer$";function G(t,e){return{start:function(n){var r=p({},e(n));function o(n){var o=p({},e(n)),i=o.x-r.x,a=o.y-r.y;r=o,t(i,a)}function i(){window.removeEventListener("pointermove",o),window.removeEventListener("pointerup",i),window.removeEventListener("pointercancel",i)}window.addEventListener("pointermove",o),window.addEventListener("pointerup",i),window.addEventListener("pointercancel",i)}}}function H(t,e){l.useEffect((function(){var n=function(t){if(!e){var n=function(t){for(var e=t;e;){if(e._reactRootContainer||Object.keys(e).some((function(t){return t.startsWith(F)})))return e;e=e.parentElement}}(t.target),r=l.version.startsWith("16")?document:n;r&&(t.stopPropagation(),r.dispatchEvent(function(t){for(var e=new t.constructor(t.type),n=e;n=Object.getPrototypeOf(n);){var r,o=C(Object.getOwnPropertyNames(n));try{for(o.s();!(r=o.n()).done;){var i=r.value;"function"!=typeof e[i]&&Object.defineProperty(e,i,{value:t[i]})}}catch(t){o.e(t)}finally{o.f()}}return e}(t)))}},r=t.current;return null==r||r.addEventListener("pointerdown",n),function(){null==r||r.removeEventListener("pointerdown",n)}}),[t,e])}var $,q=Object.freeze({__proto__:null,useDrag:G,useNoDrag:H,NoDrag:function(t){var e=l.useRef(null);return H(e,t.disabled),l.createElement("span",{ref:e},t.children)}}),K=f.default.input($||($=P(["\n  width: 100%;\n  border-radius: 30px;\n  background-color: white;\n  padding: 2px 6px;\n  border: 1px solid #999;\n  font-size: 110%;\n  box-sizing: border-box;\n  ","\n"])),(function(t){return t.styles&&t.styles(t)}));function Y(t){var e=_(l.useState(t.data.value),2),n=e[0],r=e[1],o=l.useRef(null);return H(o),l.useEffect((function(){r(t.data.value)}),[t.data.value]),l.createElement(K,{value:n,type:t.data.type,ref:o,readOnly:t.data.readonly,onChange:function(e){var n="number"===t.data.type?+e.target.value:e.target.value;r(n),t.data.setValue(n)},styles:t.styles})}var X="rgba(110,136,255,0.8)",U="#ffd92c",V=24,J="#96b38a",Q=Object.freeze({__proto__:null,$nodecolor:X,$nodecolorselected:U,$socketsize:V,$socketmargin:6,$socketcolor:J,$nodewidth:180}),Z=["init","unmount"];function tt(t){var e=t.init,n=t.unmount,r=E(t,Z),o=l.useRef(null);return l.useEffect((function(){var t=o.current;return function(){t&&n(t)}}),[]),l.useEffect((function(){o.current&&e(o.current)})),l.createElement("span",g({},r,{ref:o}))}var et=["name","emit","payload"];function nt(t){var e=t.name,n=t.emit,r=t.payload,o=E(t,et);return l.createElement(tt,g({},o,{className:e,init:function(t){return n({type:"render",data:{type:"control",element:t,payload:r}})},unmount:function(t){return n({type:"unmount",data:{element:t}})}}))}var rt,ot,it=["name","emit","nodeId","side","socketKey","payload"];function at(t){var e=t.name,n=t.emit,r=t.nodeId,o=t.side,i=t.socketKey,a=t.payload,u=E(t,it);return l.createElement(tt,g({},u,{className:e,init:function(t){return n({type:"render",data:{type:"socket",side:o,key:i,nodeId:r,element:t,payload:a}})},unmount:function(t){return n({type:"unmount",data:{element:t}})}}))}var ut,ct,lt=f.default.div(rt||(rt=P(["\n    background: ",";\n    border: 2px solid #4e58bf;\n    border-radius: 10px;\n    cursor: pointer;\n    box-sizing: border-box;\n    width: ",";\n    height: ",";\n    padding-bottom: 6px;\n    position: relative;\n    user-select: none;\n    line-height: initial;\n    font-family: Arial;\n\n    &:hover {\n        background: lighten(",",4%);\n    }\n    ","\n    .title {\n        color: white;\n        font-family: sans-serif;\n        font-size: 18px;\n        padding: 8px;\n    }\n    .output {\n        text-align: right;\n    }\n    .input {\n        text-align: left;\n    }\n    .output-socket {\n        text-align: right;\n        margin-right: -","px;\n        display: inline-block;\n    }\n    .input-socket {\n        text-align: left;\n        margin-left: -","px;\n        display: inline-block;\n    }\n    .input-title,.output-title {\n        vertical-align: middle;\n        color: white;\n        display: inline-block;\n        font-family: sans-serif;\n        font-size: 14px;\n        margin: ","px;\n        line-height: ","px;\n    }\n    .input-control {\n        z-index: 1;\n        width: calc(100% - ","px);\n        vertical-align: middle;\n        display: inline-block;\n    }\n    .control {\n        display: block;\n        padding: ","px ","px;\n    }\n    ","\n"])),X,(function(t){return Number.isFinite(t.width)?"".concat(t.width,"px"):"".concat(180,"px")}),(function(t){return Number.isFinite(t.height)?"".concat(t.height,"px"):"auto"}),X,(function(t){return t.selected&&i.css(ot||(ot=P(["\n        background: ",";\n        border-color: #e3c000;\n    "])),U)}),18,18,6,V,36,6,18,(function(t){return t.styles&&t.styles(t)}));function st(t){t.sort((function(t,e){var n,r;return((null===(n=t[1])||void 0===n?void 0:n.index)||0)-((null===(r=e[1])||void 0===r?void 0:r.index)||0)}))}function ft(t){var e=Object.entries(t.data.inputs),n=Object.entries(t.data.outputs),r=Object.entries(t.data.controls),o=t.data.selected||!1,i=t.data,a=i.id,u=i.label,c=i.width,s=i.height;return st(e),st(n),st(r),l.createElement(lt,{selected:o,width:c,height:s,styles:t.styles,"data-testid":"node"},l.createElement("div",{className:"title","data-testid":"title"},u),n.map((function(e){var n=_(e,2),r=n[0],o=n[1];return o&&l.createElement("div",{className:"output",key:r,"data-testid":"output-".concat(r)},l.createElement("div",{className:"output-title","data-testid":"output-title"},null==o?void 0:o.label),l.createElement(at,{name:"output-socket",side:"output",socketKey:r,nodeId:a,emit:t.emit,payload:o.socket,"data-testid":"output-socket"}))})),r.map((function(e){var n=_(e,2),r=n[0],o=n[1];return o?l.createElement(nt,{key:r,name:"control",emit:t.emit,payload:o,"data-testid":"control-".concat(r)}):null})),e.map((function(e){var n=_(e,2),r=n[0],o=n[1];return o&&l.createElement("div",{className:"input",key:r,"data-testid":"input-".concat(r)},l.createElement(at,{name:"input-socket",side:"input",socketKey:r,nodeId:a,emit:t.emit,payload:o.socket,"data-testid":"input-socket"}),o&&(!o.control||!o.showControl)&&l.createElement("div",{className:"input-title","data-testid":"input-title"},null==o?void 0:o.label),(null==o?void 0:o.control)&&(null==o?void 0:o.showControl)&&l.createElement(nt,{key:r,name:"input-control",emit:t.emit,payload:o.control,"data-testid":"input-control"}))})))}var dt=f.default.div(ut||(ut=P(["\n    display: inline-block;\n    cursor: pointer;\n    border: 1px solid white;\n    border-radius: ","px;\n    width: ","px;\n    height: ","px;\n    vertical-align: middle;\n    background: ",";\n    z-index: 2;\n    box-sizing: border-box;\n    &:hover {\n      border-width: 4px;\n    }\n    &.multiple {\n      border-color: yellow;\n    }\n"])),12,V,V,J),pt=f.default.div(ct||(ct=P(["\n    border-radius: ","px;\n    padding: ","px;\n    &:hover "," {\n      border-width: 4px;\n    }\n"])),18,6,dt);function ht(t){return l.createElement(pt,null,l.createElement(dt,{title:t.data.name}))}var vt=Object.freeze({__proto__:null,vars:Q,setup:function(t){var e=void 0===(null==t?void 0:t.socketPositionWatcher)?o.getDOMSocketPosition():null==t?void 0:t.socketPositionWatcher,r=(null==t?void 0:t.customize)||{},i=r.node,a=r.connection,u=r.socket,c=r.control;return{attach:function(t){e.attach(t)},render:function(t,r){if("node"===t.data.type){var s=r.parentScope(),f=i?i(t.data):ft;return f&&l.createElement(f,{data:t.data.payload,emit:function(t){return s.emit(t)}})}if("connection"===t.data.type){var d=a?a(t.data):B,p=t.data.payload,v=p.sourceOutput,m=p.targetInput,b=p.source,g=p.target;return d&&l.createElement(M,{start:t.data.start||function(t){return e.listen(b,"output",v,t)},end:t.data.end||function(t){return e.listen(g,"input",m,t)},path:function(){var t,e=(t=h().mark((function t(e,n){var i,a,u,c,l;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.emit({type:"connectionpath",data:{payload:p,points:[e,n]}});case 2:if(i=t.sent){t.next=5;break}return t.abrupt("return","");case 5:if(a=i.data,u=a.path,c=a.points,l=.3,u||2===c.length){t.next=9;break}throw new Error("cannot render connection with a custom number of points");case 9:if(u){t.next=11;break}return t.abrupt("return",p.isLoop?o.loopConnectionPath(c,l,120):o.classicConnectionPath(c,l));case 11:return t.abrupt("return",u);case 12:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){y(i,r,o,a,u,"next",t)}function u(t){y(i,r,o,a,u,"throw",t)}a(void 0)}))});return function(t,n){return e.apply(this,arguments)}}()},l.createElement(d,{data:t.data.payload}))}if("socket"===t.data.type){var w=u?u(t.data):ht;return w&&t.data.payload&&l.createElement(w,{data:t.data.payload})}if("control"===t.data.type){var x=c&&t.data.payload?c(t.data):t.data.payload instanceof n.ClassicPreset.InputControl?Y:null;return x&&l.createElement(x,{data:t.data.payload})}}}},Connection:B,useConnection:T,Control:Y,InputControl:Y,Node:ft,NodeStyles:lt,RefControl:nt,RefSocket:at,Socket:ht});function yt(t,n){var r=e.useRef();function o(){r.current&&clearTimeout(r.current)}return e.useEffect((function(){return o}),[]),[function(){o(),r.current=setTimeout((function(){t()}),n)},o]}var mt,bt,gt,wt,xt,Et="5px",Ot=f.default.div(mt||(mt=P(["\n  color: #fff;\n  padding: 4px;\n  border-bottom: 1px solid ",";\n  background-color: ",";\n  cursor: pointer;\n  width: 100%;\n  position: relative;\n  &:first-child {\n    border-top-left-radius: ",";\n    border-top-right-radius: ",";\n  }\n  &:last-child {\n    border-bottom-left-radius: ",";\n    border-bottom-right-radius: ",";\n  }\n  &:hover {\n    background-color: ",";\n  }\n"])),"rgba(69, 103, 255, 0.8)","rgba(110,136,255,0.8)",Et,Et,Et,Et,"rgba(130, 153, 255, 0.8)"),kt=f.default(Ot)(bt||(bt=P(["\n    ","\n"])),(function(t){return t.hasSubitems&&i.css(gt||(gt=P(["&:after {\n    content: 'â–º';\n    position: absolute;\n    opacity: 0.6;\n    right: 5px;\n    top: 5px;\n    }"])))})),jt=f.default.div(wt||(wt=P(["\n    position: absolute;\n    top: 0;\n    left: 100%;\n    width: ","px;\n"])),120);function Pt(t){var e,n,r,o,i=_(l.useState(!1),2),a=i[0],u=i[1],c=_(yt(l.useCallback((function(){return u(!1)}),[u]),t.delay),2),s=c[0],f=c[1],d=(null===(e=t.components)||void 0===e||null===(n=e.item)||void 0===n?void 0:n.call(e,t.data))||kt,p=(null===(r=t.components)||void 0===r||null===(o=r.subitems)||void 0===o?void 0:o.call(r,t.data))||jt;return l.createElement(d,{onClick:function(e){e.stopPropagation(),t.data.handler(),t.hide()},hasSubitems:Boolean(t.data.subitems),onPointerDown:function(t){return t.stopPropagation()},onPointerOver:function(){f(),u(!0)},onPointerLeave:function(){return s&&s()},"data-testid":"context-menu-item"},t.children,t.data.subitems&&a&&l.createElement(p,null,t.data.subitems.map((function(e){return l.createElement(Pt,{key:e.key,data:e,delay:t.delay,hide:t.hide,components:t.components},e.label)}))))}var _t,St=f.default.input(xt||(xt=P(["\n  color: white;\n  padding: 1px 8px;\n  border: 1px solid white;\n  border-radius: 10px;\n  font-size: 16px;\n  font-family: serif;\n  width: 100%;\n  box-sizing: border-box;\n  background: transparent;\n"])));function Lt(t){var e=t.component||St;return l.createElement(e,{value:t.value,onInput:function(e){return t.onChange(e.target.value)},onPointerDown:function(t){return t.stopPropagation()},"data-testid":"context-menu-search-input"})}var Ct=f.default.div(_t||(_t=P(["\n  padding: 10px;\n  width: ","px;\n  margin-top: -20px;\n  margin-left: -","px;\n"])),120,60);function Rt(t){var e,n,r,o,i,a,u=_(yt(t.onHide,t.delay),2),c=u[0],s=u[1],f=_(l.useState(""),2),d=f[0],p=f[1],h=new RegExp(d,"i"),v=t.items.filter((function(t){return t.label.match(h)})),y=(null===(e=t.components)||void 0===e||null===(n=e.main)||void 0===n?void 0:n.call(e))||Ct,m=(null===(r=t.components)||void 0===r||null===(o=r.common)||void 0===o?void 0:o.call(r))||Ot;return l.createElement(y,{onMouseOver:function(){return s()},onMouseLeave:function(){return c&&c()},onWheel:function(t){return t.stopPropagation()},"data-testid":"context-menu"},t.searchBar&&l.createElement(m,null,l.createElement(Lt,{value:d,onChange:p,component:null===(i=t.components)||void 0===i||null===(a=i.search)||void 0===a?void 0:a.call(i)})),v.map((function(e){return l.createElement(Pt,{key:e.key,data:e,delay:t.delay,hide:t.onHide,components:t.components},e.label)})))}var zt=Object.freeze({__proto__:null,setup:function(t){var e=void 0===(null==t?void 0:t.delay)?1e3:t.delay;return{render:function(n){if("contextmenu"===n.data.type)return l.createElement(Rt,{items:n.data.items,delay:e,searchBar:n.data.searchBar,onHide:n.data.onHide,components:null==t?void 0:t.customize})}}},Item:kt,Subitems:jt,Menu:Ct,Search:St,Common:Ot});function Nt(){const[t,n]=e.useState(null),[r,o]=e.useState({width:0,height:0}),i=e.useCallback((()=>{o({width:(null==t?void 0:t.offsetWidth)||0,height:(null==t?void 0:t.offsetHeight)||0})}),[null==t?void 0:t.offsetHeight,null==t?void 0:t.offsetWidth]);return function(t,n,r,o){const i=e.useRef(n);Dt((()=>{i.current=n}),[n]),e.useEffect((()=>{var e;const n=null!==(e=null==r?void 0:r.current)&&void 0!==e?e:window;if(!n||!n.addEventListener)return;const a=t=>i.current(t);return n.addEventListener(t,a,o),()=>{n.removeEventListener(t,a,o)}}),[t,r,o])}("resize",i),Dt((()=>{i()}),[null==t?void 0:t.offsetHeight,null==t?void 0:t.offsetWidth]),[n,r]}const Dt="undefined"!=typeof window?e.useLayoutEffect:e.useEffect;function It(t){return"".concat(t,"px")}var Mt,Tt,At=f.default.div(Mt||(Mt=P(["\n    position: absolute;\n    background: #7C43C5;\n    border: 1px solid #7C43C5;\n"])));function Wt(t){return l.createElement(At,{style:{left:It(t.left),top:It(t.top),width:It(t.width),height:It(t.height)},className:"minimap-node","data-testid":"minimap-node"})}var Bt,Ft=f.default.div(Tt||(Tt=P(["\n  position: absolute;\n  background: #090E2CCC;\n  border: 1px solid #121D64;\n"])));function Gt(t){var e=function(e){return e*t.containerWidth},n=function(e){return e/t.containerWidth},r=G((function(e,r){return t.translate(n(-e),n(-r))}),(function(t){return{x:t.pageX,y:t.pageY}}));return l.createElement(Ft,{id:"minimap-viewport",onPointerDown:r.start,style:{left:It(e(t.left)),top:It(e(t.top)),width:It(e(t.width)),height:It(e(t.height))},"data-testid":"minimap-viewport"})}var Ht=f.default.div(Bt||(Bt=P(["\n    position: absolute;\n    right: 24px;\n    bottom: 24px;\n    background: #010418;\n    padding: 20px;\n    overflow: hidden;\n    border: 2px solid #3C2857;\n    border-radius: 8px;\n    box-sizing: border-box;\n    transform: translateX(-175%);\n    transition: transform 0.5s ease;\n"])));function $t(t){var n=e.useRef(),r=_(Nt(),2),o=r[0],i=r[1].width,a=function(t){return t*i},u=e.useCallback((function(t){n.current=t,o(t)}),[o]);return l.createElement(Ht,{size:t.size,id:"minimap",style:{width:It(t.size*t.ratio),height:It(t.size)},onPointerDown:function(t){t.stopPropagation(),t.preventDefault()},onDoubleClick:function(e){if(e.stopPropagation(),e.preventDefault(),n.current){var r=n.current.getBoundingClientRect(),o=(e.clientX-r.left)/(t.size*t.ratio),i=(e.clientY-r.top)/(t.size*t.ratio);t.point(o,i)}},ref:u,"data-testid":"minimap"},i&&t.nodes.map((function(t,e){return l.createElement(Wt,{key:e,left:a(t.left),top:a(t.top),width:a(t.width),height:a(t.height)})})),l.createElement(Gt,g({},t.viewport,{start:t.start,containerWidth:i,translate:t.translate})))}var qt,Kt=Object.freeze({__proto__:null,setup:function(t){return{render:function(e){if("minimap"===e.data.type)return l.createElement($t,{nodes:e.data.nodes,size:(null==t?void 0:t.size)||200,ratio:e.data.ratio,viewport:e.data.viewport,start:e.data.start,translate:e.data.translate,point:e.data.point})}}}}),Yt=20,Xt=f.default.div(qt||(qt=P(["\n  width: ","px;\n  height: ","px;\n  box-sizing: border-box;\n  background: ",";\n  border: 2px solid white;\n  border-radius: ","px;\n"])),Yt,Yt,(function(t){return t.selected?"#ffd92c":"steelblue"}),Yt);function Ut(t){var e=G((function(e,n){return t.translate(e,n)}),t.pointer),n=t.position,r=n.x,o=n.y;return l.createElement(Xt,{onPointerDown:function(n){n.stopPropagation(),n.preventDefault(),e.start(n),t.pointerdown()},onContextMenu:function(e){e.stopPropagation(),e.preventDefault(),t.contextMenu()},selected:t.selected,style:{position:"absolute",top:"".concat(o-Yt/2,"px"),left:"".concat(r-Yt/2,"px")},"data-testid":"pin"})}var Vt=Object.freeze({__proto__:null,setup:function(t){return{render:function(e,n){var r=e.data,o=n.parentScope(a.BaseAreaPlugin);if("reroute-pins"===r.type)return function(e,n){return l.createElement(l.Fragment,null,e.pins.map((function(e){return l.createElement(Ut,g({},e,{key:e.id,contextMenu:function(){return(null==t?void 0:t.contextMenu)&&t.contextMenu(e.id)},translate:function(n,r){return(null==t?void 0:t.translate)&&t.translate(e.id,n,r)},pointerdown:function(){return(null==t?void 0:t.pointerdown)&&t.pointerdown(e.id)},pointer:n}))})))}(r.data,(function(){return o.area.pointer}))}}}}),Jt=Object.freeze({__proto__:null,classic:vt,contextMenu:zt,minimap:Kt,reroute:Vt}),Qt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&x(t,e)}(i,t);var e,n,r,o=k(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),b(O(e=o.call(this,"react-render")),"presets",[]),e.renderer=function(t){var e=null==t?void 0:t.createRoot;if(e){var n=new WeakMap;return{mount:function(t,r){return n.has(r)||n.set(r,e(r)),n.get(r).render(t)},unmount:function(t){var e=n.get(t);e&&(e.unmount(),n.delete(t))}}}return{mount:s.render,unmount:s.unmountComponentAtNode}}({createRoot:null==t?void 0:t.createRoot}),e.addPipe((function(t){if(!t||"object"!==v(t)||!("type"in t))return t;if("unmount"===t.type)e.unmount(t.data.element);else if("render"===t.type){if("filled"in t.data&&t.data.filled)return t;if(e.mount(t.data.element,t))return p(p({},t),{},{data:p(p({},t.data),{},{filled:!0})})}return t})),e}return e=i,(n=[{key:"setParent",value:function(t){var e=this;j(w(i.prototype),"setParent",this).call(this,t),this.presets.forEach((function(t){t.attach&&t.attach(e)}))}},{key:"mount",value:function(t,e){var n,r=this.parentScope(),o=C(this.presets);try{for(o.s();!(n=o.n()).done;){var i=n.value.render(e,this);if(i){var a=l.createElement(z,{rendered:function(){return r.emit({type:"rendered",data:e.data})}},i);return this.renderer.mount(a,t),!0}}}catch(t){o.e(t)}finally{o.f()}}},{key:"unmount",value:function(t){this.renderer.unmount(t)}},{key:"addPreset",value:function(t){var e=t;e.attach&&e.attach(this),this.presets.push(e)}}])&&m(e.prototype,n),r&&m(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(n.Scope);t.Drag=q,t.Presets=Jt,t.ReactPlugin=Qt,t.RefComponent=tt,t.useRete=function(t){var n=_(e.useState(null),2),r=n[0],o=n[1],i=e.useRef(),a=_(e.useState(null),2),u=a[0],c=a[1],l=e.useRef(null);return e.useEffect((function(){r&&(i.current&&(i.current.destroy(),r.innerHTML=""),t(r).then((function(t){i.current=t,c(t)})))}),[r,t]),e.useEffect((function(){return function(){i.current&&i.current.destroy()}}),[]),e.useEffect((function(){l.current&&o(l.current)}),[l.current]),[l,u]},Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=rete-react-plugin.min.js.map
